!function(e,t,n){typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&typeof define.amd=="object"?define(function(){return n()}):t[e]=n()}("obsessed",this,function(){function e(t){var n=e.resolve(t),r=e.modules[n];if(!r)throw new Error('failed to require "'+t+'"');return r.exports||(r.exports={},r.call(r.exports,r,r.exports,e.relative(n))),r.exports}return e.modules={},e.resolve=function(t){var n=t,r=t+".js",i=t+"/index.js";return e.modules[r]&&r||e.modules[i]&&i||n},e.register=function(t,n){e.modules[t]=n},e.relative=function(t){return function(n){if("."!=n.charAt(0))return e(n);var r=t.split("/"),i=n.split("/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return e(r.join("/"))}},e.alias=function(t,n){var r=e.modules[t];e.modules[n]=r},e.register("async-runner.js",function(e,t,n){function i(){}function s(e,t){r.apply(this,arguments),this.pause=0,this.end=i,this.times=e}var r=n("./runner");s.prototype=new r,s.prototype.constructor=s,s.prototype.task=function(e){return this.fn=e,this},s.prototype.notify=function(e){return this.end=e,this},s.prototype.delay=function(e){return this.pause=e,this},s.prototype.run=function(){function i(t){t&&e.capture(t),t&&e.executed++<e.times?e.queue(i,r):e.done(arguments)}var e=this,t=this.fn,n=this.end,r=this.pause;e.queue(i)},s.prototype.queue=function(e,t){t=t||0,setTimeout(function(){this.fn(e)}.bind(this),t)},s.prototype.done=function(e){e[0]=this.error(),this.end.apply(this.end,e)},e.exports=s}),e.register("obsessed-error.js",function(e,t,n){function r(e,t){Error.captureStackTrace(this,r),this.message=this.combine(e,t)}r.prototype=Object.create(Error.prototype),r.prototype.combine=function(e,t){var n=t.map(function(e){return"  - "+e.message}).join("\n");return e+"\n"+n},r.prototype.name="ObsessedError",e.exports=r}),e.register("obsessed.js",function(e,t,n){function s(e,t){this.fn=t,this.times=this.parse(e)}function o(e,t){var n=new s(e,t);return n.handle()}var r=n("./sync-runner"),i=n("./async-runner");s.prototype.parse=function(e){return"string"==typeof e&&(e=e.replace(/time(s)?/,"")),parseInt(e)},s.prototype.handle=function(){var e=null,t=null;return t=!this.fn||this.fn.length?i:r,e=new t(this.times,this.fn),this.fn&&e.run(),e},e.exports=o,e.exports.SyncRunner=r,e.exports.AsyncRunner=i}),e.register("runner.js",function(e,t,n){function i(e,t){this.fn=t,this.errs=[],this.executed=0,this.times=e}var r=n("./obsessed-error");i.prototype.capture=function(e){this.errs.push(e)},i.prototype.error=function(){if(this.errs.length)return new r("Operation failed",this.errs)},e.exports=i}),e.register("sync-runner.js",function(e,t,n){function i(e,t){r.apply(this,arguments),this.success=!1}var r=n("./runner");i.prototype=new r,i.prototype.constructor=i,i.prototype.raise=function(){if(!this.success)throw this.error()},i.prototype.finish=function(){this.success=!0},i.prototype.run=function(){while(this.executed++<this.times)try{this.fn(),this.finish();break}catch(e){this.capture(e)}this.raise()},e.exports=i}),e.alias("./obsessed.js","obsessed"),e("obsessed")})